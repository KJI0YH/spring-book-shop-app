<!--END-->
<!--END--><!DOCTYPE html><!--[if IE 7]>
<html class="ie7" lang="ru">
<![endif]-->
<!--[if IE 8]>
<html class="ie8" lang="ru">
<![endif]-->
<!--[if IE 9]>
<html class="ie9" lang="ru">
<![endif]-->
<!--[if gt IE 9]><!-->
<html lang="ru" xmlns:th="http://www.thymeleaf.org"> <!--<![endif]-->
<head>
    <title>Тут название страницы написать</title>
    <meta content="Описание страницы" name="description">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" name="viewport">
    <!--meta( http-equiv="cache-control" content="no-cache")-->
    <!--meta( http-equiv="expires" content="0")-->
    <!--link(rel="preload" href="assets/css/extra.min.css?v=" + version as="style" crossorigin="anonymous")-->
    <link href="favicon.ico" rel="shortcut icon">
    <link as="font" crossorigin="anonymous" href="/assets/fonts/Montserrat/Montserrat-SemiBold.woff2" rel="preload">
    <link as="font" crossorigin="anonymous" href="/assets/fonts/Montserrat/Montserrat-Light.woff2" rel="preload">
    <link as="font" crossorigin="anonymous" href="/assets/fonts/Montserrat/Montserrat-Medium.woff2" rel="preload">
    <link as="font" crossorigin="anonymous" href="/assets/fonts/Montserrat/Montserrat-ExtraBold.woff2" rel="preload">
    <link href="/assets/css/fonts.min.css?v=87821122" rel="stylesheet">
    <link href="/assets/css/basic.min.css?v=87821122" rel="stylesheet">
    <link href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet">
    <link href="/assets/css/extra.min.css?v=87821122" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script defer src="/assets/js/scripts.min.js?v=87821122"></script>
</head>
<body class="Site">
<div th:replace="~{fragments/locale_selector :: localeSelector}"></div>
<!--if lt IE 8
p.error-browser
    | Ваш браузер&nbsp;
    em устарел!&nbsp;
    a(href="http://browsehappy.com/") Выберите новую версию
        +s
        | браузера здесь&nbsp;
    | для правильного отображения сайта.
-->
<header th:replace="~{fragments/common_header_fragment :: headFragment}"></header>
<div class="Middle">
    <div class="wrap">
        <main class="Middle-main">
            <ul class="breadcrumbs">
                <li class="breadcrumbs-item"><a href="/index.html" th:href="@{/}" th:text="#{topbar.main}">Главная</a>
                </li>
                <li class="breadcrumbs-item"><a href="/genres/index.html" th:href="@{/genres}"
                                                th:text="#{topbar.books}">Книги</a>
                </li>
                <li class="breadcrumbs-item breadcrumbs-item_current">
                    <span th:text="${book.title}">Мара и морок</span>
                </li>
            </ul>
            <div class="Product">
                <div class="ProductCard">
                    <div class="ProductCard-look">
                        <form action="#" enctype="multipart/form-data" id="imgForm" method="POST"
                              th:if="${curUsr != null && curUsr.isAdmin()}"
                              th:action="${'/books/'+ book.slug +'/img/save'}">
                            <div class="ProductCard-photo" id="uploadButton">
                                <img alt="card.jpg" src="/assets/img/content/main/card.jpg" th:src="${book.image}"/>
                            </div>
                            <input id="dialog" name="file" style="display: none" type="file"/>
                        </form>
                        <img th:unless="${curUsr != null && curUsr.isAdmin()}" alt="card.jpg" src="/assets/img/content/main/card.jpg" th:src="${book.image}"/>
                    </div>
                    <div class="ProductCard-desc">
                        <div class="ProductCard-header">
                            <h1 class="ProductCard-title" th:text="${book.title}">Мара и морок
                            </h1>
                            <div class="ProductCard-author">
                                <span class="ProductCard-titleProp" th:text="#{book.author}">Автор:</span><br>
                                <th:block th:each="author: ${book.authorList}">
                                    <a href="#" th:href="${'/authors/' + author.slug}"
                                       th:text="${author.toString()}">Борис Васильевич Бедный</a>
                                    <br>
                                </th:block>
                            </div>
                            <div class="ProductCard-rating">
                                <span class="ProductCard-titleProp" th:text="#{book.rating}">Рейтинг:</span>
                                <button class="trigger trigger_dropdown" type="button">
                                    <div class="Rating Rating_noStyleLink">
                                        <span th:replace="~{fragments/rating_stars_fragment :: rating_stars(${book.getRating()})}"></span>
                                        <span class="Rating-title"
                                              th:text="${'(' + book.rateList.size() + ')'}">(567)</span>
                                    </div>
                                    <div class="modal modal_compression modal_dropdown">
                                        <div class="modal-window">
                                            <a class="modal-close" href="#">
                                                <span></span>
                                                <span></span>
                                            </a>
                                            <strong class="modal-title" th:text="#{book.rateDist}">Распределение
                                                оценок</strong>
                                            <div class="RatingGroup">
                                                <span class="Rating">
                                                    <span th:replace="~{fragments/rating_stars_fragment :: rating_stars(5)}"></span>
                                                    <span class="Rating-title" th:text="${book.getRateCount(5)}">1</span>
                                                </span>
                                                <br>
                                                <span class="Rating">
                                                    <span th:replace="~{fragments/rating_stars_fragment :: rating_stars(4)}"></span>
                                                    <span class="Rating-title" th:text="${book.getRateCount(4)}">4</span>
                                                </span>
                                                <br>
                                                <span class="Rating">
                                                    <span th:replace="~{fragments/rating_stars_fragment :: rating_stars(3)}"></span>
                                                    <span class="Rating-title" th:text="${book.getRateCount(3)}">0</span>
                                                </span>
                                                <br>
                                                <span class="Rating">
                                                    <span th:replace="~{fragments/rating_stars_fragment :: rating_stars(2)}"></span>
                                                    <span class="Rating-title" th:text="${book.getRateCount(2)}">10</span>
                                                </span>
                                                <br>
                                                <span class="Rating">
                                                    <span th:replace="~{fragments/rating_stars_fragment :: rating_stars(1)}"></span>
                                                    <span class="Rating-title" th:text="${book.getRateCount(1)}">3</span></span>
                                            </div>
                                        </div>
                                    </div>
                                </button>
                            </div>
                            <th:block th:if="${curUsr != null}">
                                <div class="ProductCard-assessment">
                                    <span class="ProductCard-titleProp" th:text="#{book.rate}">Оцените книгу:</span>
                                    <span class="Rating Rating_input" data-bookid="2121" th:attr="data-bookid=${book.id}">
                                        <span th:replace="~{fragments/rating_stars_input_fragment :: rating_stars}"></span>
                                    </span>
                                </div>
                            </th:block>
                            <div class="ProductCard-tags">
                                <span class="ProductCard-titleProp" th:text="#{book.tags}">Тэги:</span><br>
                                <th:block th:each="tag : ${book.tagList}">
                                    <a href="/tags/" th:href="${'/tags/' + tag.slug}"
                                       th:text="${tag.name}">Современные</a>
                                    <br>
                                </th:block>
                            </div>
                            <div class="ProductCard-cost"><span class="ProductCard-titleProp" th:text="#{book.price}">Цена:</span>
                                <span class="ProductCard-priceOld" th:if="${book.discount != 0}"
                                      th:text="${'₽' + book.price / 100 + '.' + book.price % 100}">₽300</span>
                                <span class="ProductCard-price" th:if="${book.discount == 0}"
                                      th:text="${'₽' + book.price / 100 + '.' + book.price % 100}">₽180</span>
                                <span class="ProductCard-price"
                                      th:text="${'$' + book.discountPrice / 100 + '.' + book.discountPrice % 100}"
                                      th:unless="${book.discount == 0}">₽180</span>
                            </div>
                            <!--+div.-info
                            //+div.-cost
                            //    +div.-price $55.00
                            //    +div.-priceOld $115.00
                            //+div.-compare
                            //    +btn._default
                            //        +img('change.svg','icons/card').-icon
                            -->
                        </div>
                        <div class="ProductCard-text">
                            <p th:text="${book.description}">Таких, как я, называют Марами - отмеченными самой богиней
                                смерти Мораной. Когда-то у меня и моих шести сестер был свой путь. Тогда люди нас
                                уважали и просили о милосердии. Они приносили нам подношения и молились нам. Но 200 лет
                                назад все изменилось, когда принц Серата осмелился поднять руку на одну из нас. Я
                                пыталась отомстить, но погибли мы все. Теперь правители Аракена, погрязшие в длительной
                                войне со своим соседом Сератом, решили вернуть меня к жизни. Дать второй шанс на месть и
                                свободу, привязав меня к тому, против кого я никогда не пойду. Таких, как он, называют
                                Морок, и их боятся абсолютно все.
                            </p>
                        </div>
                        <div class="ProductCard-cart">
                            <!--+div.-cartElement.-cartElement_amount-->
                            <!--    +Amount._product-->
                            <div class="ProductCard-cartElement">
                                <button class="btn btn_primary btn_outline"
                                        data-alttext="Отложена"
                                        data-bookid="[1111]" data-btnradio="buyblock"
                                        data-btntype="check"
                                        data-check="false"
                                        data-sendstatus="KEPT"
                                        th:attr="data-bookid=${'[' + book.id + ']'}">
                    <span class="btn-icon">
                      <img alt="heart.svg" src="/assets/img/icons/heart.svg"/>
                    </span><span class="btn-content" th:text="#{book.postpone}">Отложить</span>
                                </button>
                            </div>
                            <div class="ProductCard-cartElement">
                                <button class="btn btn_primary btn_outline"
                                        data-alttext="В корзине"
                                        data-bookid="[1111]" data-btnradio="buyblock"
                                        data-btntype="check"
                                        data-check="false"
                                        data-sendstatus="CART"
                                        th:attr="data-bookid=${'[' + book.id + ']'}">
                    <span class="btn-icon">
                      <img alt="shopping-basket.svg" src="/assets/img/icons/shopping-basket.svg"/>
                    </span>
                                    <span class="btn-content" th:text="#{book.buy}">Купить</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="Product-comments">
                    <div class="Product-comments-header">
                        <h3 class="Product-comments-title" th:text="#{book.reviews}">Отзывы</h3>
                        <span class="Product-comments-amount" th:text="#{book.review(${book.reviewList.size()})}">567 отзывов</span>
                    </div>
                </div>
                <div class="Comments">
                    <th:block th:if="${curUsr == null}">
                        <h3>Only authorized users can leave reviews</h3>
                        <div><a th:href="@{/signin}" th:text="Signin"></a></div>
                        <div><a th:href="@{/signup}" th:text="Signup"></a></div>
                    </th:block>
                    <th:block th:unless="${curUsr == null}">
                        <strong class="Comments-title">Написать отзыв</strong>
                        <div class="Comments-addComment">
                            <form action="#" class="form" data-bookid="1111" method="post" th:attr="data-bookid=${book.id}">
                                <div class="form-group">
                                    <textarea class="form-textarea Comments-review" data-validate="require" id="review"
                                              name="review" placeholder="Текст отзыва"></textarea>
                                </div>
                                <div class="form-group Comments-sendReview">
                                    <button class="btn btn_warning" type="submit">Отправить отзыв
                                    </button>
                                </div>
                            </form>
                        </div>
                    </th:block>
                    <div class="Comment" th:each="review : ${book.reviewList}">
                        <div class="Comment-column Comment-column_pict">
                            <div class="Comment-avatar">
                            </div>
                        </div>
                        <div class="Comment-column">
                            <header class="Comment-header">
                                <div>
                                    <strong class="Comment-title">
                                        <span th:text="${review.user.name}">Александр Кузнецов</span>
                                        <span th:replace="~{fragments/rating_stars_fragment :: rating_stars(${review.user.getRating()})}"></span>
                                    </strong>
                                    <span class="Comment-date" th:text="${review.time}">17.04.2020 16:40</span>
                                </div>
                            </header>
                            <div class="Comment-content">
                                <th:block th:if="${review.text.length() >= 400}">
                                    <div class="Spoiler">
                                        <div class="Spoiler-visible">
                                            <p th:text="${review.text.substring(0, 400)}"></p>
                                        </div>
                                        <div class="Spoiler-hide">
                                            <p th:text="${review.text.substring(400)}"></p>
                                        </div>
                                        <div class="Comment-footer">
                                            <div class="Comment-appeal">
                                                <button class="btn btn_white btn_like"
                                                        data-btnradio="one1"
                                                        data-btntype="check"
                                                        data-check="false"
                                                        data-likeid="333"
                                                        th:attr="data-likeid=${review.id}">
                                                    <span class="btn-icon">
                                                        <img alt="like.svg" src="/assets/img/icons/comment/like.svg"/>
                                                    </span>
                                                    <span class="btn-content" th:text="${review.getLikesCount()}">500</span>
                                                </button>
                                                <button class="btn btn_white btn_dislike"
                                                        data-btnradio="one1"
                                                        data-btntype="check"
                                                        data-check="false"
                                                        data-likeid="333"
                                                        th:attr="data-likeid=${review.id}">
                                                    <span class="btn-icon">
                                                        <img alt="dislike.svg" src="/assets/img/icons/comment/dislike.svg"/>
                                                    </span>
                                                    <span class="btn-content" th:text="${review.getDislikesCount()}">50</span>
                                                </button>
                                            </div>
                                            <button class="Spoiler-trigger btn btn_primary btn_nr"
                                                    data-hidetext="Показать отзыв полностью"
                                                    data-showtext="Свернуть отзыв"
                                                    th:attr="data-showtext=#{book.hideReview},data-hidetext=#{book.showReview}"
                                                    type="button">
                                            </button>
                                        </div>
                                    </div>
                                </th:block>
                                <p th:text="${review.text}" th:unless="${review.text.length() >= 400}"></p>
                                <div class="Comment-footer" th:unless="${review.text.length() >= 400}">
                                    <div class="Comment-appeal">
                                        <button class="btn btn_white btn_like"
                                                data-btnradio="two2"
                                                data-btntype="check"
                                                data-check="false"
                                                data-likeid="1111"
                                                th:attr="data-likeid=${review.id}">
                                            <span class="btn-icon">
                                                <img alt="like.svg" src="/assets/img/icons/comment/like.svg"/>
                                            </span>
                                            <span class="btn-content" th:text="${review.getLikesCount()}">200</span>
                                        </button>
                                        <button class="btn btn_white btn_dislike"
                                                data-btnradio="two2"
                                                data-btntype="check"
                                                data-check="false"
                                                data-likeid="1111"
                                                th:attr="data-likeid=${review.id}">
                                            <span class="btn-icon">
                                                <img alt="dislike.svg" src="/assets/img/icons/comment/dislike.svg"/>
                                            </span>
                                            <span class="btn-content" th:text="${review.getDislikesCount()}">100</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
<footer th:replace="~{fragments/common_footer_fragment :: footFragment}"></footer>
<script src="/assets/plg/jQuery/jquery-3.5.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="/assets/js/UploadNewBookImageScript.js"></script>
</body>
</html>